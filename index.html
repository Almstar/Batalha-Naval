<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Batalha Naval - Aviões (T fixo)</title>
<style>
  :root{--cell-size:42px;--mini:26px}
  body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:18px;background:#f7f8fb;color:#111}
  h1{font-size:20px;margin:0 0 12px}
  .layout{display:flex;gap:20px;align-items:flex-start}
  /* board */
  .board-wrap{display:grid;grid-template-columns:40px repeat(10,var(--cell-size));grid-template-rows:20px repeat(10,var(--cell-size));align-items:center}
  .label-col{width:40px;height:20px;display:flex;align-items:center;justify-content:center;font-weight:600}
  .label-row{width:var(--cell-size);height:20px;display:flex;align-items:center;justify-content:center;font-weight:600}
  .cell{width:var(--cell-size);height:var(--cell-size);background:#e6e9eb;border:1px solid #c9ced2;display:flex;align-items:center;justify-content:center;cursor:pointer;user-select:none;font-weight:700;border-radius:4px}
  .cell.revealed{cursor:default}
  .cell.miss{background:#cfe7ff;color:#045}
  .cell.hit{background:#ffffff;color:#000;font-size:18px}
  /* right column */
  .rightcol{min-width:300px}
  .hud{background:#fff;padding:12px;border:1px solid #e1e5ea;border-radius:8px}
  .counter{font-size:18px;margin-bottom:8px}
  button#reset{margin-top:10px;padding:8px 12px;border-radius:6px;border:0;background:#2b6cff;color:#fff;cursor:pointer}
  .note{font-size:13px;color:#444;margin-top:8px}
  .message{padding:10px;border-radius:6px;margin-top:12px;display:none}
  .message.win{background:#d4edda;border:1px solid #c3e6cb}
  .message.lose{background:#f8d7da;border:1px solid #f5c6cb}
  /* legend */
  .legend{margin-top:14px;background:#fff;padding:12px;border:1px solid #e1e5ea;border-radius:8px}
  .legend h3{margin:0 0 8px;font-size:15px}
  .legend-item{display:flex;gap:12px;align-items:center;margin-bottom:12px}
  .mini-grid{display:grid;gap:6px}
  .mini-row{display:flex;gap:6px}
  .mini-cell{width:var(--mini);height:var(--mini);background:#e6e9eb;border:1px solid #c9ced2;display:flex;align-items:center;justify-content:center;font-weight:700;border-radius:4px}
  /* porta-aviões T */
  .legend-t{display:grid;grid-template-columns:repeat(3,var(--mini));grid-auto-rows:var(--mini);gap:6px}
  .legend-t .empty{visibility:hidden}
  @media (max-width:780px){.layout{flex-direction:column}.rightcol{min-width:100%}}
</style>
</head>
<body>
  <h1>Batalha Naval - Aviões</h1>
  <div class="layout">
    <div>
      <div class="board-wrap" id="boardWrap">
        <div class="label-col"></div>
      </div>
    </div>

    <div class="rightcol">
      <div class="hud">
        <div class="counter">Jogadas restantes: <span id="shots">30</span></div>
        <div>Acertos: <span id="hits">0</span> / <span id="totalShipCells">0</span></div>
        <div class="note">Clique nos quadrados cinza para atirar. Água aparece azul-claro. Acertos mostram o número do avião (tamanho).</div>
        <button id="reset">Reiniciar jogo</button>
        <div id="message" class="message"></div>
      </div>

      <div class="legend" aria-label="Legenda dos aviões">
        <h3>Legenda:</h3>

        <div class="legend-item">
          <div class="legend-t" aria-hidden>
            <div class="mini-cell">5</div>
            <div class="mini-cell">5</div>
            <div class="mini-cell">5</div>
            <div class="mini-cell empty"></div>
            <div class="mini-cell">5</div>
            <div class="mini-cell empty"></div>
            <div class="mini-cell empty"></div>
            <div class="mini-cell">5</div>
            <div class="mini-cell empty"></div>
          </div>
          <div>Porta-aviões — 5 quadrados em formato <strong>T</strong> (3 em cima, 1 no centro e 1 abaixo).</div>
        </div>

        <div class="legend-item">
          <div class="mini-row"><div class="mini-cell">4</div><div class="mini-cell">4</div><div class="mini-cell">4</div><div class="mini-cell">4</div></div>
          <div>Navio de 4 canos — 4 quadrados em linha com número <strong>4</strong>.</div>
        </div>

        <div class="legend-item">
          <div class="mini-row"><div class="mini-cell">3</div><div class="mini-cell">3</div><div class="mini-cell">3</div></div>
          <div>2 Navios de 3 canos — 3 quadrados em linha com número <strong>3</strong>.</div>
        </div>

        <div class="legend-item">
          <div class="mini-row"><div class="mini-cell">2</div><div class="mini-cell">2</div></div>
          <div>3 Navios de 2 canos — 2 quadrados em linha com número <strong>2</strong>.</div>
        </div>

        <div class="legend-item">
          <div class="mini-row"><div class="mini-cell">1</div></div>
          <div>4 Navios de 1 cano — 1 quadrado isolado com número <strong>1</strong>.</div>
        </div>
      </div>
    </div>
  </div>

<script>
const ROWS = 10, COLS = 10, SHOTS_LIMIT = 30;
const letters = ['A','B','C','D','E','F','G','H','I','J'];

const FLEET = [
  {id:5, shape:'T_fixed', coords:[[0,0],[0,1],[0,2],[1,1],[2,1]], count:1},
  {id:4, shape:'line', length:4, count:1},
  {id:3, shape:'line', length:3, count:2},
  {id:2, shape:'line', length:2, count:3},
  {id:1, shape:'point', length:1, count:4}
];

let board = [];
let ships = [];
let shotsLeft =
